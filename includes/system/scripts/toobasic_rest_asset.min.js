if(window.jQuery){if(typeof window.TooBasic==="undefined"){window.TooBasic={}}window.TooBasic.RestManager=function(e,c){this.resourceName=e;this.url=false;this.index=function(i,g,h){console.log("DEBUG",typeof i);if(typeof i==="function"){h=false;g=i;i={}}g=a(g);h=a(h);var f=this.url+"resource/"+this.resourceName+b(i);this.logUrl(f);return $.ajax({dataType:"json",url:f,data:{},success:g,error:h})};this.create=function(h,g,i){g=a(g);i=a(i);var f=this.url+"resource/"+this.resourceName;this.logUrl(f);return $.ajax({url:f,type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(h),success:g,error:i})};this.show=function(j,i,g,h){if(typeof i==="function"){h=false;g=i;i={}}g=a(g);h=a(h);var f=this.url+"resource/"+this.resourceName+"/"+j+b(i);this.logUrl(f);return $.ajax({dataType:"json",url:f,data:{},success:g,error:h})};this.update=function(j,h,g,i){g=a(g);i=a(i);var f=this.url+"resource/"+this.resourceName+"/"+j;this.logUrl(f);return $.ajax({url:f,type:"PUT",dataType:"json",contentType:"application/json",data:JSON.stringify(h),success:g,error:i})};this.destroy=function(i,g,h){g=a(g);h=a(h);var f=this.url+"resource/"+this.resourceName+"/"+i;this.logUrl(f);return $.ajax({url:f,type:"DELETE",dataType:"json",data:{},success:g,error:h})};this.search=function(j,k,h,i){if(typeof k==="function"){i=false;h=k;k={}}h=a(h);i=a(i);var g=[];$.each(j,function(m,l){g.push(m);g.push(l)});g=g.join("/");var f=this.url+"search/"+this.resourceName+"/"+g+b(k);this.logUrl(f);return $.ajax({dataType:"json",url:f,data:{},success:h,error:i})};this.stats=function(g,h){g=a(g);h=a(h);var f=this.url+"stats/"+this.resourceName;this.logUrl(f);return $.ajax({dataType:"json",url:f,data:{},success:g,error:h})};this.logUrl=function(f){console.log("RestManager["+this.resourceName+"] call: "+f)};var d=function(){};var a=function(f){if(typeof f!=="function"){f=d}return f};var b=function(f){out=[];$.each(f,function(h,g){out.push(h+"="+g)});out=out.join("&");return out?"&"+out:""};if(typeof c==="undefined"){this.url=window.location.href}else{this.url=c}this.url+=this.url.indexOf("?")>-1?"&":"?";this.url+="rest="}}else{console.log("'toobasic_rest_asset.js' requires jQuery to be included before it.")};